<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>个人中心详情</title>
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">
    <meta content="yes" name="apple-mobile-web-app-capable">
    <meta content="black" name="apple-mobile-web-app-status-bar-style">
    <link rel="stylesheet" href="../../bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="../../bower_components/font-awesome/css/font-awesome.min.css">
    <!--图片放大-->
    <link rel="stylesheet" href="../../bower_components/photoswipe/dist/photoswipe.css">
    <link rel="stylesheet"
          href="../../bower_components/photoswipe/dist/default-skin/default-skin.css">
    <script src="../../bower_components/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet"
          href="../../bower_components/eonasdan-bootstrap-datetimepicker/build/css/bootstrap-datetimepicker.min.css"/>
    <script type="text/javascript"
            src="http://webapi.amap.com/maps?v=1.3&key=7639d0ec97020f3f7dc68951a52fcb43&plugin=AMap.CitySearch"></script>
    <link rel="stylesheet" href="../../styles/mobile.css">
    <style>
        #input {
            width: 85%;
            border: 0;
            word-wrap: break-word;
            resize: none;
            outline: none;
            font-size: 1rem;
            text-align: right;
        }

        .dropdown-menu li {
            padding: 5px 0;
        }
    </style>
</head>
<body class="bgf0f0f0" style="position: relative;">
<div class="person-detail-content bffffff">
    <div class="person_detail_information padding2">
        <div id="chooseImage" class="overflow-hidden padding2" style="border-bottom: 1px solid #ddd;">
            <span class="fl" style="line-height: 50px;">头像</span>
            <img class="fr" src="../../images/interesting-1.png" style="height: 50px;border-radius: 100%;">
        </div>
        <ul>
            <li class="overflow-hidden">
                <label class="fl">昵称</label>
                <input class="fr text_align_right" type="text" placeholder="昵称">
            </li>
            <!--<li class="overflow-hidden">-->
            <!--<label class="fl">二维码</label>-->
            <!--<i class="fa fa-qrcode fa-15x fr" data-toggle="modal" data-target="#myModal" style="padding-right: 4px;"></i>-->
            <!--</li>-->
            <li class="overflow-hidden">
                <label class="fl">二维码</label>
                <div class="photo-swipe fr width80">
                    <div class="my-gallery overflow-hidden" itemscope itemtype="http://schema.org/ImageGallery"
                         style="text-align: right;padding: 0;">
                        <figure itemprop="associatedMedia" itemscope class="fl pr width100" style="margin: 0">
                            <a href="../../images/index-pc-footer-QRcode.jpg" itemprop="contentUrl" data-size="250x250"
                               class="chat-img-nicheng-a">
                                <img class="image" style="width: 25px" src="../../images/index-pc-footer-QRcode.jpg"
                                     itemprop="thumbnail" alt="Image description"/>
                            </a>
                        </figure>
                    </div>
                </div>
                <div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
                    <div class="pswp__bg"></div>
                    <div class="pswp__scroll-wrap">
                        <div class="pswp__container">
                            <div class="pswp__item"></div>
                            <div class="pswp__item"></div>
                            <div class="pswp__item"></div>
                        </div>
                        <div class="pswp__ui pswp__ui--hidden">
                            <div class="pswp__top-bar">
                                <div class="pswp__counter"></div>
                                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                                <div class="pswp__preloader">
                                    <div class="pswp__preloader__icn">
                                        <div class="pswp__preloader__cut">
                                            <div class="pswp__preloader__donut"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                                <div class="pswp__share-tooltip"></div>
                            </div>
                            <div class="pswp__caption">
                                <div class="pswp__caption__center"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </li>
            <li class="overflow-hidden">
                <label class="fl">真实姓名</label>
                <input class="fr text_align_right" type="text" placeholder="真实姓名">
            </li>
            <li class="overflow-hidden">
                <label class="fl">手机号</label>
                <input class="fr text_align_right" type="tel" placeholder="手机号">
            </li>
            <li class="overflow-hidden">
                <label class="fl">输入验证码</label>
                <input type="number" placeholder="输入验证码" style="width: 35%;margin-left: 10px">
                <input class="fr getcode" type="button" id="btngetcode" value="免费获取验证码" onclick="startCount(this);"
                       style="line-height: 21px;margin-bottom: -3px;margin-top: -3px;"/>
            </li>
            <li>
                <div>
                    <label>性别</label>
                    <div class="dropdown add-card-button fr person_detail_button">
                        <button class="btn btn1 btn-default dropdown-toggle" type="button" id="gender">
                            <span id="gendername">男</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdownMenu" id="genderul">
                            <li class="center">男</li>
                            <li class="center">女</li>
                        </ul>
                    </div>
                </div>
            </li>
            <li>
                <label>生日</label>
                <!--选择-->
                <!--<input class="fr text_align_right" type="text" placeholder="生日">-->
                <div class="fr" style="width: 40%">
                    <div class='input-group' id='datetimepicker10'>
                        <input type='text' class="form-control" style="display: none" id="time_val">
                        <span class="input-group-addon" style="background-color: #fff;text-align: right">
                             <i class="lh23" id="date">2017年03月20日</i>
                        </span>
                    </div>
                </div>
            </li>
            <li class="overflow-hidden">
                <label class="fl">身份证号</label>
                <input class="fr text_align_right" type="number" placeholder="身份证号">
            </li>
            <li>
                <div>
                    <label>驾照类型</label>
                    <div class="dropdown add-card-button fr person_detail_button">
                        <button class="btn btn1 btn-default dropdown-toggle" type="button" id="license">
                            <span id="licensename">C1</span>
                            <span class="caret"></span>
                        </button>
                        <ul class="dropdown-menu dropdownMenu" id="licenseul">
                            <li class="center">A1</li>
                            <li class="center">A2</li>
                            <li class="center">A3</li>
                            <li class="center">B1</li>
                            <li class="center">B2</li>
                            <li class="center">C1</li>
                            <li class="center">C2</li>
                            <li class="center">C3</li>
                            <li class="center">C4</li>
                        </ul>
                    </div>
                </div>
            </li>
            <li class="overflow-hidden">
                <label class="fl">邮箱</label>
                <input class="fr text_align_right" type="email" placeholder="邮箱">
            </li>
            <li class="overflow-hidden">
                <label class="fl">推荐人</label>
                <span class="fr lh23" style="padding: 0 4px;">张三</span>
            </li>
            <!--<li class="overflow-hidden">-->
            <!--<label class="fl lh23">地区</label>-->
            <!--&lt;!&ndash;选择&ndash;&gt;-->
            <!--<input class="fr text_align_right" type="text" placeholder="地区">-->
            <!--</li>-->
            <li style="position: relative">
                <label>地址</label>
                <textarea id="input" type="text" placeholder="输入地址" class="fr lh23" style=""></textarea>
            </li>
        </ul>
        <div id="container" tabindex="0" style="margin-top: 10px"></div>
    </div>
</div>
<div class="bffffff mt8 mb100 padding2">
    <div class="person_detail_information">
        <ul>
            <li class="overflow-hidden">
                <label class="fl">绑定微信</label>
                <span class="fr lh23 e73534">未绑定</span>
            </li>
            <li class="overflow-hidden">
                <label class="fl">绑定QQ</label>
                <span class="fr lh23 e73534">未绑定</span>
            </li>
        </ul>
    </div>
</div>
<button type="submit" class="button-fixed" onclick="save();">保存</button>
<script src="../../librarys/jquery/jquery-2.2.3.min.js"></script>
<script src="../../bower_components/moment/min/moment.min.js"></script>
<script src="../../bower_components/moment/min/locales.min.js"></script>
<script src="../../bower_components/moment/min/moment-with-locales.min.js"></script>
<script src="../../bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
<script src="../../bower_components/eonasdan-bootstrap-datetimepicker/build/js/bootstrap-datetimepicker.min.js"></script>
<script src="../../bower_components/photoswipe/dist/photoswipe.min.js"></script>
<script src="../../bower_components/photoswipe/dist/photoswipe-ui-default.js"></script>
<script type="text/javascript">
    //    var initPhotoSwipeFromDOM = function (gallerySelector) {
    //
    //        // parse slide data (url, title, size ...) from DOM elements
    //        // (children of gallerySelector)
    //        var parseThumbnailElements = function (el) {
    //            var thumbElements = el.childNodes,
    //                numNodes = thumbElements.length,
    //                items = [],
    //                figureEl,
    //                linkEl,
    //                size,
    //                item;
    //
    //            for (var i = 0; i < numNodes; i++) {
    //
    //                figureEl = thumbElements[i]; // <figure> element
    //
    //                // include only element nodes
    //                if (figureEl.nodeType !== 1) {
    //                    continue;
    //                }
    //
    //                linkEl = figureEl.children[0]; // <a> element
    //
    //                size = linkEl.getAttribute('data-size').split('x');
    //
    //                // create slide object
    //                item = {
    //                    src: linkEl.getAttribute('href'),
    //                    w: parseInt(size[0], 10),
    //                    h: parseInt(size[1], 10)
    //                };
    //
    //                if (figureEl.children.length > 1) {
    //                    // <figcaption> content
    //                    item.title = figureEl.children[1].innerHTML;
    //                }
    //
    //                if (linkEl.children.length > 0) {
    //                    // <img> thumbnail element, retrieving thumbnail url
    //                    item.msrc = linkEl.children[0].getAttribute('src');
    //                }
    //
    //                item.el = figureEl; // save link to element for getThumbBoundsFn
    //                items.push(item);
    //            }
    //
    //            return items;
    //        };
    //
    //        // getById nearest parent element
    //        var closest = function closest(el, fn) {
    //            return el && ( fn(el) ? el : closest(el.parentNode, fn) );
    //        };
    //
    //        // triggers when user clicks on thumbnail
    //        var onThumbnailsClick = function (e) {
    //            e = e || window.event;
    //            e.preventDefault ? e.preventDefault() : e.returnValue = false;
    //
    //            var eTarget = e.target || e.srcElement;
    //
    //            // getById root element of slide
    //            var clickedListItem = closest(eTarget, function (el) {
    //                return (el.tagName && el.tagName.toUpperCase() === 'FIGURE');
    //            });
    //
    //            if (!clickedListItem) {
    //                return;
    //            }
    //
    //            // getById index of clicked item by looping through all child nodes
    //            // alternatively, you may define index via data- attribute
    //            var clickedGallery = clickedListItem.parentNode,
    //                childNodes = clickedListItem.parentNode.childNodes,
    //                numChildNodes = childNodes.length,
    //                nodeIndex = 0,
    //                index;
    //
    //            for (var i = 0; i < numChildNodes; i++) {
    //                if (childNodes[i].nodeType !== 1) {
    //                    continue;
    //                }
    //
    //                if (childNodes[i] === clickedListItem) {
    //                    index = nodeIndex;
    //                    break;
    //                }
    //                nodeIndex++;
    //            }
    //
    //            if (index >= 0) {
    //                // open PhotoSwipe if valid index found
    //                openPhotoSwipe(index, clickedGallery);
    //            }
    //            return false;
    //        };
    //
    //        // parse picture index and gallery index from URL (#&pid=1&gid=2)
    //        var photoswipeParseHash = function () {
    //            var hash = window.location.hash.substring(1),
    //                params = {};
    //
    //            if (hash.length < 5) {
    //                return params;
    //            }
    //
    //            var vars = hash.split('&');
    //            for (var i = 0; i < vars.length; i++) {
    //                if (!vars[i]) {
    //                    continue;
    //                }
    //                var pair = vars[i].split('=');
    //                if (pair.length < 2) {
    //                    continue;
    //                }
    //                params[pair[0]] = pair[1];
    //            }
    //
    //            if (params.gid) {
    //                params.gid = parseInt(params.gid, 10);
    //            }
    //
    //            return params;
    //        };
    //
    //        var openPhotoSwipe = function (index, galleryElement, disableAnimation, fromURL) {
    //            var pswpElement = document.querySelectorAll('.pswp')[0],
    //                gallery,
    //                options,
    //                items;
    //
    //            items = parseThumbnailElements(galleryElement);
    //
    //            // define options (if needed)
    //            options = {
    //
    //                // define gallery index (for URL)
    //                galleryUID: galleryElement.getAttribute('data-pswp-uid'),
    //
    //                getThumbBoundsFn: function (index) {
    //                    // See Options -> getThumbBoundsFn section of documentation for more info
    //                    var thumbnail = items[index].el.getElementsByTagName('img')[0], // getById thumbnail
    //                        pageYScroll = window.pageYOffset || document.documentElement.scrollTop,
    //                        rect = thumbnail.getBoundingClientRect();
    //
    //                    return {x: rect.left, y: rect.top + pageYScroll, w: rect.width};
    //                }
    //            };
    //
    //            // PhotoSwipe opened from URL
    //            if (fromURL) {
    //                if (options.galleryPIDs) {
    //                    // parse real index when custom PIDs are used
    //                    // http://photoswipe.com/documentation/faq.html#custom-pid-in-url
    //                    for (var j = 0; j < items.length; j++) {
    //                        if (items[j].pid == index) {
    //                            options.index = j;
    //                            break;
    //                        }
    //                    }
    //                } else {
    //                    // in URL indexes start from 1
    //                    options.index = parseInt(index, 10) - 1;
    //                }
    //            } else {
    //                options.index = parseInt(index, 10);
    //            }
    //
    //            // exit if index not found
    //            if (isNaN(options.index)) {
    //                return;
    //            }
    //
    //            if (disableAnimation) {
    //                options.showAnimationDuration = 0;
    //            }
    //
    //            // Pass data to PhotoSwipe and initialize it
    //            gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, options);
    //            gallery.init();
    //        };
    //
    //        // loop through all gallery elements and bind events
    //        var galleryElements = document.querySelectorAll(gallerySelector);
    //
    //        for (var i = 0, l = galleryElements.length; i < l; i++) {
    //            galleryElements[i].setAttribute('data-pswp-uid', i + 1);
    //            galleryElements[i].onclick = onThumbnailsClick;
    //        }
    //
    //        // Parse URL and open gallery if it contains #&pid=3&gid=1
    //        var hashData = photoswipeParseHash();
    //        if (hashData.pid && hashData.gid) {
    //            openPhotoSwipe(hashData.pid, galleryElements[hashData.gid - 1], true, true);
    //        }
    //    };
    //    // execute above function
    //    initPhotoSwipeFromDOM('.my-gallery');

    //    var time=60;
    //    function startCount(val) {
    //        $("#btngetcode").addClass("border_color_666");
    //        val.setAttribute("disabled",true);
    //        val.value="重新发送(" + time + "s)";
    //        time = time - 1;
    //        if (time <= -1) {
    //            val.value="免费获取验证码";
    //            stopCount();
    //            time=60;
    //            $("#btngetcode").removeClass("border_color_666");
    //            return;
    //        }
    //        task = setTimeout(function() {
    //            startCount(val)
    //        },1000)
    //    }
    //    function stopCount() {
    //        clearTimeout(task);
    //        $("#btngetcode").attr("disabled",false);
    //    }
    //    $(function () {
    //        var datepicker = $('#datetimepicker10').datetimepicker({
    //            viewMode: 'days',
    //            format: 'YYYY年MM月DD日',
    //            locale: 'zh-CN'
    //        });
    //        datepicker.on("dp.hide", function (e) {
    //            $("#date").html($("#time_val").val());
    //        });
    //
    //        $("#gender").on("click", function () {
    //            $("#genderul").toggle();
    //        });
    //        $("#genderul li").on("click", function () {
    //            $("#gendername").html($(this).text());
    //            $("#genderul").hide();
    //        });
    //        $("#license").on("click", function () {
    //            $("#licenseul").toggle();
    //        });
    //        $("#licenseul li").on("click", function () {
    //            $("#licensename").html($(this).text());
    //            $("#licenseul").hide();
    //        });
    //    });
    //
    //    //显示隐藏
    //    $(document).ready(function(){
    //        $("#dropdownMenu1").click(function(){
    //            $("#person_detail_panel").slideToggle("fast");
    //        });
    //    });

    /***************************************
     由于Chrome、IOS10等已不再支持非安全域的浏览器定位请求，为保证定位成功率和精度，请尽快升级您的站点到HTTPS。
     ***************************************/
    var geolocation;
    //加载地图，调用浏览器定位服务
    var map = new AMap.Map('container', {
        resizeEnable: true,
        zoom: 13,
    });

    AMap.plugin('AMap.Geocoder', function () {
        var geocoder = new AMap.Geocoder({
            city: "徐州"//城市，默认：“全国”
        });
        var marker = new AMap.Marker({
            map: map,
            bubble: true
        });
        map.on('click', function (e) {
            marker.setPosition(e.lnglat);
            geocoder.getAddress(e.lnglat, function (status, result) {
                if (status === 'complete') {
                    document.getElementById('input').value = result.regeocode.formattedAddress
                }
            })
        })
    });

    //解析定位错误信息
    function onError(data) {
        document.getElementById('tip').innerHTML = '定位失败';
    }
</script>
</body>
</html>